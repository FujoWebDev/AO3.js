// Generated by ts-to-zod
import { z } from "zod/v3";
import { WorkRatings, WorkCategory, WorkWarningStatus, WorkWarnings } from "./../../entities";

export const archiveIdSchema = z.number();

export const tagCategorySchema = z.union([z.literal("fandom"), z.literal("character"), z.literal("relationship"), z.literal("archive warning"), z.literal("additional tags")]);

export const tagSchema = z.object({
    name: z.string(),
    id: archiveIdSchema.nullable(),
    category: tagCategorySchema,
    canonical: z.boolean(),
    common: z.boolean(),
    canonicalName: z.string().nullable(),
    parentTags: z.array(z.string()),
    childTags: z.array(z.object({
        tagName: z.string(),
        category: tagCategorySchema
    })),
    subTags: z.array(z.object({
        tagName: z.string(),
        parentSubTag: z.string().nullable()
    }))
});

export const tagSearchTypeSchema = z.union([z.literal("fandom"), z.literal("character"), z.literal("relationship"), z.literal("freeform"), z.literal("any")]);

export const tagWranglingStatusSchema = z.union([z.literal("canonical"), z.literal("noncanonical"), z.literal("synonymous"), z.literal("canonical_or_synonymous"), z.literal("noncanonical_and_nonsynonymous"), z.literal("any")]);

export const tagSearchFiltersSchema = z.object({
    tagName: z.string().nullable(),
    fandoms: z.array(z.string()),
    type: tagSearchTypeSchema,
    wranglingStatus: tagWranglingStatusSchema,
    sortColumn: z.union([z.literal("name"), z.literal("created_at"), z.literal("works_count")]),
    sortDirection: z.union([z.literal("asc"), z.literal("desc")]),
    page: z.number()
});

export const tagSearchResultSummarySchema = z.object({
    filters: tagSearchFiltersSchema,
    totalResults: z.number(),
    pages: z.object({
        total: z.number(),
        current: z.number()
    }),
    tags: z.array(z.object({
        name: z.string(),
        type: z.union([z.literal("fandom"), z.literal("character"), z.literal("relationship"), z.literal("freeform"), z.literal("unsorted")]),
        canonical: z.boolean(),
        worksCount: z.number()
    }))
});

export const userSchema = z.object({
    id: archiveIdSchema,
    username: z.string(),
    pseuds: z.string(),
    url: z.string(),
    shortUrl: z.string(),
    icon: z.string(),
    header: z.string().nullable(),
    joined: z.string(),
    location: z.string().nullable(),
    birthday: z.string().nullable(),
    works: z.number(),
    series: z.number(),
    bookmarks: z.number(),
    collections: z.number(),
    gifts: z.number(),
    bioHtml: z.string().nullable()
});

export const workRatingsSchema = z.nativeEnum(WorkRatings);

export const workCategorySchema = z.nativeEnum(WorkCategory);

export const workWarningStatusSchema = z.nativeEnum(WorkWarningStatus);

export const workWarningsSchema = z.nativeEnum(WorkWarnings);

export const basicSeriesSchema = z.object({
    id: archiveIdSchema,
    index: z.number(),
    name: z.string()
});

export const authorSchema = z.object({
    username: z.string(),
    pseud: z.string(),
    anonymous: z.boolean()
});

export const workSummarySchema = z.object({
    id: archiveIdSchema,
    title: z.string(),
    category: z.array(workCategorySchema).nullable(),
    publishedAt: z.string(),
    updatedAt: z.string().nullable(),
    summary: z.string().nullable(),
    rating: workRatingsSchema,
    adult: z.boolean(),
    fandoms: z.array(z.string()),
    tags: z.object({
        warnings: z.array(workWarningsSchema),
        characters: z.array(z.string()),
        relationships: z.array(z.string()),
        additional: z.array(z.string())
    }),
    authors: z.array(authorSchema),
    language: z.string(),
    words: z.number(),
    chapters: z.object({
        published: z.number(),
        total: z.number().nullable()
    }),
    chapterInfo: z.object({
        id: archiveIdSchema,
        index: z.number(),
        name: z.string().nullable(),
        summary: z.string().nullable()
    }).nullable(),
    series: z.array(basicSeriesSchema),
    complete: z.boolean(),
    stats: z.object({
        bookmarks: z.number(),
        comments: z.number(),
        kudos: z.number(),
        hits: z.number()
    }),
    locked: z.literal(false)
});

export const workContentSchema = z.object({
    summary: z.string().nullable(),
    startNotes: z.string().nullable(),
    content: z.string(),
    endNotes: z.string().nullable()
});

export const lockedWorkSummarySchema = z.object({
    id: archiveIdSchema,
    locked: z.literal(true)
});

export const chapterSchema = z.object({
    id: archiveIdSchema,
    workId: archiveIdSchema,
    index: z.number(),
    title: z.string(),
    publishedAt: z.string(),
    url: z.string(),
    shortUrl: z.string()
});

export const seriesWorkSummarySchema = workSummarySchema.omit({ "category": true, "publishedAt": true, "rating": true, "tags": true, "stats": true, "locked": true, "chapterInfo": true, "series": true }).extend({
    url: z.string(),
    shortUrl: z.string(),
    tags: workSummarySchema.shape.tags.omit({ "warnings": true }),
    stats: workSummarySchema.shape.stats.omit({ "comments": true })
});

export const seriesSchema = z.object({
    id: archiveIdSchema,
    name: z.string(),
    startedAt: z.string(),
    updatedAt: z.string(),
    authors: workSummarySchema.shape.authors,
    description: z.string().nullable(),
    notes: z.string().nullable(),
    words: z.number(),
    bookmarks: z.number(),
    complete: z.boolean(),
    workCount: z.number(),
    works: z.array(seriesWorkSummarySchema)
});
